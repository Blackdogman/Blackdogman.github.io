<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="Blackdogman's blog" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title> - Blackdogman's blog</title><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">Blackdogman's blog</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2018-06-20T11:49:43.742Z" class="post__time">June 20, 2018</time><h1 class="post__title"><a href="/2018/06/20/5月10日JAVA培训笔记/"></a></h1></header><div class="post__main echo"><h2 id="HTTP通信"><a href="#HTTP通信" class="headerlink" title="HTTP通信"></a>HTTP通信</h2><h4 id="GET请求"><a href="#GET请求" class="headerlink" title="GET请求"></a>GET请求</h4><ol>
<li>创建url对象</li>
<li>通过url对象打开链接并得到HTTPUrlConnection对象</li>
<li>设置相关属性（请求方式 get/post 请求参数）</li>
<li>连接</li>
<li>接受服务器响应信息</li>
<li>销毁连接<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Url url = new Url(&quot;xxxxx&quot;); </span><br><span class="line">HTTPUrlConnection conn = url.openConnection(); //得到HTTPUrlConnection</span><br><span class="line"></span><br><span class="line">conn.setDoInput(true); //设置输入流</span><br><span class="line">conn.setRequestMethod(&quot;GET/POST&quot;); //设置请求方式，注意全大写</span><br><span class="line">conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;); //设置请求属性（数据的提交方式）</span><br><span class="line"></span><br><span class="line">conn.connect(); //连接</span><br><span class="line"></span><br><span class="line">InputStream input = conn.getInputStream();</span><br><span class="line">byte[] bufin = new byte[1024];</span><br><span class="line">int len = 0;</span><br><span class="line">StringBuilder sb = new StringBuilder();</span><br><span class="line">if( (len = input.read(bufin)) != -1 )&#123; //循环读取inputStream（很重要的算法）</span><br><span class="line">    sb.append(new String(bufin));</span><br><span class="line">    bufin = new byte[1024];</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(&quot;接受到的数据： &quot; + sb.toString());</span><br><span class="line">conn.disConnect() //销毁连接</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="POST请求"><a href="#POST请求" class="headerlink" title="POST请求"></a>POST请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">URL url = new URL(&quot;xxxxx&quot;);</span><br><span class="line">HTTPUrlConnection conn = url.openConnetion();</span><br><span class="line">conn.setDoOutPut(true);</span><br><span class="line">conn.setDoInPut(true);</span><br><span class="line">conn.setRequestMethod(&quot;POST&quot;);</span><br><span class="line">conn.setUseCaches(true);</span><br><span class="line">conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;); //设置请求属性（数据的提交方式）</span><br><span class="line"></span><br><span class="line">conn.connect();</span><br><span class="line"></span><br><span class="line">//================这段记住=============</span><br><span class="line">String pram = &quot;name=&quot; + URLEncoder.encode(&quot;value&quot;, &quot;codeType(utf-8)&quot;)</span><br><span class="line">            +&quot;&amp;name2=&quot; + URLEncoder.encode...; </span><br><span class="line">//=====================================</span><br><span class="line">DataOutputStream output = new DataOutputStream(conn.getOutputStream());</span><br><span class="line">output.write(parm.getBytes());</span><br><span class="line">output.flush();</span><br><span class="line">output.close();</span><br><span class="line"></span><br><span class="line">InputStream input = conn.getInputStream();</span><br><span class="line">Byte[] bufin = new Byte[256];</span><br><span class="line">input.read(bufin);</span><br><span class="line"></span><br><span class="line">System.out.println(new String(bufin, &quot;utf-8&quot;).tirm());</span><br><span class="line">input.close();</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">### JAVA 邮件收发</span><br><span class="line">#### mail.jar</span><br><span class="line">1. 创建Properties对象，设置属性</span><br></pre></td></tr></table></figure>
<p>properties.setProperty(key, value);<br>k:mail.debug v:true //debug开关<br>k:mail.host  v:发送或者接收服务器地址 //smtp.qq.com(发送) pop.qq.com(接收)<br>k:mail.transport.protocol v:smtp //发送时用的协议<br>k:mail.store.protocol v:pop3 //接收时用的协议<br>k:mail.debug.auth     v:true //认证协议<br><code>`</code></p>
<ol start="2">
<li>创建一个Session对象</li>
<li>Session对象创建一个Transport对象/Store对象，用于发送/接受邮件</li>
<li>Transport对象/Store 连接服务器</li>
<li>Transport对象/Store 创建MimeMessage对象</li>
<li>Transport发送邮件, Store接收邮件</li>
</ol>
<ul>
<li>接收邮件的协议：pop</li>
<li>发送邮件的协议：smtp</li>
</ul>
</div><footer class="post__foot u-cf"><a href="/2018/06/20/5月10日JAVA培训笔记/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2018 Blackdogman</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/2018/06/20/5月17日mysql培训笔记/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/2018/06/20/5月11日JAVA培训笔记/" class="page-menu__link icon-arrow-right"></a></li></menu></footer></body></html>