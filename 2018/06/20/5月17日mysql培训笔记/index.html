<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="Blackdogman's blog" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title> - Blackdogman's blog</title><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">Blackdogman's blog</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2018-06-20T11:49:43.758Z" class="post__time">June 20, 2018</time><h1 class="post__title"><a href="/2018/06/20/5月17日mysql培训笔记/"></a></h1></header><div class="post__main echo"><h3 id="LIMIT"><a href="#LIMIT" class="headerlink" title="LIMIT"></a>LIMIT</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LIMIT 起始位置,偏移量</span><br><span class="line">//起始位置，从0开始</span><br><span class="line">//偏移量，获取数据的数量</span><br><span class="line">分页算法 (page - 1) * pagecount, pageconut</span><br></pre></td></tr></table></figure>
<h3 id="笛卡尔积"><a href="#笛卡尔积" class="headerlink" title="笛卡尔积"></a>笛卡尔积</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM tb1,tb2 //这种连接方式叫笛卡尔积</span><br></pre></td></tr></table></figure>
<h3 id="多行单列"><a href="#多行单列" class="headerlink" title="多行单列"></a>多行单列</h3><h5 id="ANY关键词"><a href="#ANY关键词" class="headerlink" title="ANY关键词"></a>ANY关键词</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ANY:接在比较操作符后面，返回ture 或者 false</span><br><span class="line">where xx &gt; any ()</span><br><span class="line">SOME:与ANY相同</span><br><span class="line">-- ANY用法</span><br><span class="line">SELECT * FROM tb1 WHERE tb1.x &gt; any (SELECT * FROM tb2 WHERE xxx = xxxx);</span><br><span class="line">&gt; any 相当于是判断 tb1.x &gt; (...)这个的结果，运算会遍历外面代码的记录范围然后判断条件，如果存在一个条件成立，那么就返回true。</span><br><span class="line">如果存在成立的条件，相当于语句变成了</span><br><span class="line">SELECT * FROM tb1 WHERE tb1.x &gt; true;</span><br></pre></td></tr></table></figure>
<h5 id="ALL关键词"><a href="#ALL关键词" class="headerlink" title="ALL关键词"></a>ALL关键词</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALL:满足所有的条件的关键词</span><br><span class="line">SELECT * FROM tb1 WHERE tb1.x &lt;= ALL (SELECT x FROM tb2)</span><br><span class="line">相当于查找出&lt;=子查询的所有结果集</span><br></pre></td></tr></table></figure>
<h5 id="FUNCTION-函数"><a href="#FUNCTION-函数" class="headerlink" title="FUNCTION 函数"></a>FUNCTION 函数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE FUNCTION funname(parm1, parm2)</span><br><span class="line">RETURNS 返回值</span><br><span class="line">BEGIN</span><br><span class="line">函数体</span><br><span class="line">END</span><br></pre></td></tr></table></figure>
<h4 id="Proceduce-存储过程"><a href="#Proceduce-存储过程" class="headerlink" title="Proceduce 存储过程"></a>Proceduce 存储过程</h4><ul>
<li><p>概念：预编译好的一段sql语句。</p>
</li>
<li><p>创建成功后会被机器编译放入内存，并且引擎会优化它，再次调用不再会编译。执行速度相比普通语句会更快。</p>
</li>
<li><p>缺点，存储过程只针对一种数据库，当针对其他数据库的时候将不能再使用。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 语法</span><br><span class="line">CREATE PROCEDUCE proName(parm1 type, parm2 type)</span><br><span class="line">BEGIN</span><br><span class="line">proceducebody</span><br><span class="line">END </span><br><span class="line">-- 调用</span><br><span class="line">CALL proName;</span><br></pre></td></tr></table></figure>
<h6 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 全局变量 @@ 使用与标识</span><br><span class="line">-- 会话变量 @  使用与标识</span><br><span class="line">-- 局部变量 </span><br><span class="line">DECLARE a VARHCAR(X);</span><br><span class="line">SET a := &quot;要赋予的值&quot;;</span><br></pre></td></tr></table></figure>
<h6 id="参数类型"><a href="#参数类型" class="headerlink" title="参数类型"></a>参数类型</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- in输入参数</span><br><span class="line">-- out输出参数</span><br><span class="line">-- inout既可以当成入参也可以为出参</span><br><span class="line">CREATE PROCEDUCE p (IN parm1 VARCHAR(), IN parm2 VARCHAR(), OUT parm3 VARCHAR())</span><br><span class="line">BEGIN</span><br><span class="line">SET parm3 := value; -- 直接给out参数赋值</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line">-- 调用</span><br><span class="line">SET @a := &apos;&apos;;</span><br><span class="line">call p(&apos;in参数&apos;, @a); -- 用@a变量接受返回值</span><br><span class="line">SELECT @a; -- 输出返回值</span><br></pre></td></tr></table></figure>
<h6 id="IF语法"><a href="#IF语法" class="headerlink" title="IF语法"></a>IF语法</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IF @a &lt; 10 </span><br><span class="line">THEN xxxxxx; -- 注意有分号</span><br><span class="line">ELSEIF @a &lt; 20</span><br><span class="line">THEN xxxxxx;</span><br><span class="line">END IF;</span><br></pre></td></tr></table></figure>
<h6 id="WHILE语法"><a href="#WHILE语法" class="headerlink" title="WHILE语法"></a>WHILE语法</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">WHILE @a &lt; 10 DO</span><br><span class="line">...... -- 方法体</span><br><span class="line">...... </span><br><span class="line">END WHILE;</span><br></pre></td></tr></table></figure>
<h4 id="TRIGGER触发器"><a href="#TRIGGER触发器" class="headerlink" title="TRIGGER触发器"></a>TRIGGER触发器</h4><ul>
<li>当触发指定操作(UPDATE/INSERT/DELETE)时执行指定的操作</li>
<li>不能同时在一张表上建立两个相同类型的触发器<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TRIGGER trigger_name -- 触发器名称</span><br><span class="line">trigger_time -- AFTER/BEFORE</span><br><span class="line">trigger_event -- INSERT/UPDATE/DELETE </span><br><span class="line">ON tb_name -- 建立触发器的表</span><br><span class="line">FOR EACH ROW</span><br><span class="line">trigger_stmt -- 执行的语句</span><br><span class="line"></span><br><span class="line">-- 取值</span><br><span class="line">OLD.字段名 -- 在操作执行之前的值</span><br><span class="line">NEW.字段名 -- 在操作执行之后的值</span><br></pre></td></tr></table></figure></li>
</ul>
</div><footer class="post__foot u-cf"><a href="/2018/06/20/5月17日mysql培训笔记/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2018 Blackdogman</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/2018/06/20/5月3日JAVA培训笔记/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/2018/06/20/5月10日JAVA培训笔记/" class="page-menu__link icon-arrow-right"></a></li></menu></footer></body></html>